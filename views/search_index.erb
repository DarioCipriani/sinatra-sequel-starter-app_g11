<head>
  <link rel="icon" href=https://upload.wikimedia.org/wikipedia/commons/7/73/Ruby_logo.svg type="image/png"/>
  <!--Fuentes-->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;700&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <title>Carreras</title>
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      background: #ffffff;
    }
    footer {
      background: #2f5d62;
      color: #a7c4bc;
      height: 40px;
      margin: 0px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    footer p {
      margin: 0px
    }
    .titulo {
      color: #f2f2f6;
      font-size: 4vh;
    }
    .titulo h3 {
      margin: 15px;
      padding-top: 15px;
      padding-bottom: 15px;
    }
    .col-2 {
      margin: 5px;
      padding-top: 15px;
      padding-bottom: 15px;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      align-items: flex-end;
    }
    .col-1 {
      font-size: 3vh;
      color: #2f5d62;
    }
    ul {
      margin-left: 40px
    }
    li a {
      text-decoration: none;
      color: #2f5d62;
      font-size: 4vh;
    }
    .buttom {
      width: 160px;
      height: 50px;
      border-radius: 15px;
      background: #2f5d62;
      color: #dfeeea;
      font-size: 3vh;
      margin-left: 120px;
    }
    }
    .input {
      width: 350px;
      height: 50px;
      border-radius: 12px;
      color: #2f5d62;
      font-size: 3vh;
      text-align: center
    }
    .cuerpo {
      display: flex;
      flex-direction: row;
      justify-content: space-around;
      align-items: flex-start;
      margin-top: 0px
    }
    h3 {
      color: #f2f2f6;
      font-size: 8vh;
      text-align: center;
      margin: 5px;
      text-shadow: 2px 2px 4px #dfeeea;
    }
    .img {
      width: 35px;
      height: 35px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    button {
      border: none;
      background: #ffffff;
      cursor: pointer;
    }
    .boton {
      display: flex;
      justify-content: flex-end;
      align-items: flex-end;
    }
    .botonera {
      width: 80px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      align-text: center;
      color: black;
      text-decoration: none;
    }
    p {
      margin: 0px;
      padding: 0px;
      text-align: center;
    }
    .card {
      width: 80%;
      border: 5px solid #5e8b7e;
      border-radius: 10px;
      display: flex;
      margin-left: 10%;
      margin-top: 5%;
      height: 70%;
      flex-direction: row;
      justify-content: center;
      align-items: center;
    }
    .login {
      width: 80%;
    }
    .izq {
      border-radius: 10px;
      display: flex;
      flex-direction: row;
      justify-content: center;
      align-items: center;
      width: 50%;
      height: 100%;
      background: #f2f2f6;
    }
    .der {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 60%;
      height: 100%;
      background: #5e8b7e;
    }
    .select-css {
      font-size: 18px;
      font-family: 'Verdana', sans-serif;
      font-weight: 400;
      color: #444;
      line-height: 1.3;
      padding: 6px 6px 6px 10px;
      width: 200px;
      height: 35px;
      max-width: 80%;
      box-sizing: border-box;
      margin: 0.5px;
      border: 1px solid #aaa;
      box-shadow: 0 1px 0 1px rgba(0, 0, 0, .03);
      border-radius: .3em;
      -moz-appearance: none;
      -webkit-appearance: none;
      appearance: none;
      background-color: #fff;
      background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23007CB2%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E'), linear-gradient(to bottom, #ffffff 0%, #f7f7f7 100%);
      background-repeat: no-repeat, repeat;
      background-position: right .7em top 50%, 0 0;
      background-size: .65em auto, 100%;
    }
    .select-css::-ms-expand {
      display: none;
    }
    .select-css:hover {
      border-color: #888;
    }
    .select-css:focus {
      border-color: #aaa;
      box-shadow: 0 0 1px 3px rgba(59, 153, 252, .7);
      box-shadow: 0 0 0 3px -moz-mac-focusring;
      color: #222;
      outline: none;
    }
    .select-css option {
      font-weight: normal;
    }
    .classOfElementToColor:hover {
      background-color: red;
      color: black
    }
    .select-css option[selected] {
      background-color: orange;
    }
    .description {
      margin: 5px;
      padding: 10px;
      text-align: center;
      width: 70%;
      font-size: 4vh;
      color: #dfeeea;
    }
    input[type="date"] {
      display: inline-block;
      text-align: center;
      position: relative;
      padding: 10px 40px 8px 10px;
      font-size: 1rem;
      font-family: 'Verdana', sans-serif;
      border: 1px solid #8292a2;
      border-radius: 0.25rem;
      background: white url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='22' viewBox='0 0 20 22'%3E%3Cg fill='none' fill-rule='evenodd' stroke='%23688EBB' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' transform='translate(1 1)'%3E%3Crect width='18' height='18' y='2' rx='2'/%3E%3Cpath d='M13 0L13 4M5 0L5 4M0 8L18 8'/%3E%3C/g%3E%3C/svg%3E") right 1rem center no-repeat;
      cursor: pointer;
    }
    input[type="date"]:focus {
      outline: none;
      border-color: #3acfff;
      box-shadow: 0 0 0 0.25rem rgba(0, 120, 250, 0.1);
    }
    ::-webkit-datetime-edit {
    }
    ::-webkit-datetime-edit-fields-wrapper {
    }
    ::-webkit-datetime-edit-month-field:hover,::-webkit-datetime-edit-day-field:hover,::-webkit-datetime-edit-year-field:hover {
      background: rgba(0, 120, 250, 0.1);
    }
    ::-webkit-datetime-edit-text {
      opacity: 0;
    }
    ::-webkit-clear-button,::-webkit-inner-spin-button {
      display: none;
    }
    ::-webkit-calendar-picker-indicator {
      position: absolute;
      width: 2.5rem;
      height: 100%;
      top: 0;
      right: 0;
      bottom: 0;
      opacity: 0;
      cursor: pointer;
      color: rgba(0, 120, 250, 1);
      background: rgba(0, 120, 250, 1);
    }
    input[type="date"]:hover::-webkit-calendar-picker-indicator {
      opacity: 0.05;
    }
    input[type="date"]:hover::-webkit-calendar-picker-indicator:hover {
      opacity: 0.15;
    }
  </style>
</head>
<body>
  <header>
    <div class="boton">
      <a href="/search" class="botonera">
        <img href="/" class="img" src='https://cdn-icons-png.flaticon.com/512/59/59861.png'>
        <p>Buscar</p>
      </a>
      <a href="/careers" class="botonera">
        <img href="/" class="img" src='https://image.flaticon.com/icons/png/512/999/999735.png'>
        <p>Carreras</p>
      </a>
      <a href="/" class="botonera">
        <img href="/" class="img" src='https://image.flaticon.com/icons/png/512/15/15766.png'>
        <p>Inicio</p>
      </a>
    </div>
    <hr>
  </header>
  <div class="card">
    <div class="izq">
      <img
            class="login"
            src="https://image.freepik.com/vector-gratis/sigueme-diseno-tematica-social-empresarial_24877-50426.jpg">
    </div>
    <div class="der">
      <div class="titulo">
        <h2>Buscar Carrera:</h2>
        <form>
          <label>Carrera:</label>
          <select id="carrera" name="carrera" class="select-css" aria-label=".form-select-sm example" required>
            <% @careers.map do |career| %>
              <option href="careers/<%=career.id%>">
                <%=career.name %></option>
            <% end %></select>
          <br>
          Fecha Desde:
          <input type="date" id="fecha_d" name="fecha_d" required>
          <br>
          Fecha Hasta:
          <input type="date" required id="fecha_h" name="fecha_h" >
          <br>
          <br>
          <form action='/search' method='POST'>
            <button class="buttom" type="button" class="btn btn-info" id="saveForm" onclick="savedForm()">Buscar</button>
          </form>
        </div>
    </div>
  </form>
</div>
</div>
 <script>
 function savedForm() {
    const fecha_d = document.getElementById("fecha_d").value;
    const fecha_h = document.getElementById("fecha_h").value;
    const carrera = document.getElementById("carrera").value;
    console.log(JSON.stringify(fecha_h));
    if(fecha_d=='' || fecha_h== ''){
      alert('ERROR: Debe elegir una fecha desde y una fecha hasta v√°lida');
      return false;
    }
    if(Date.parse(document.getElementById("fecha_h").value) < Date.parse(document.getElementById("fecha_d").value)) {

       alert("ERROR: La fecha final debe ser mayor a la fecha inicial");
       return false;
    }
    const formComplete={ fecha_d:fecha_d , fecha_h:fecha_h , carrera:carrera }
    console.log(JSON.stringify(formComplete));

      const xhr = new XMLHttpRequest();
      xhr.open('POST', '/search');
      xhr.setRequestHeader('Content-Type', 'application/json');
      xhr.send(JSON.stringify(formComplete));
       xhr.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            console.log(this.responseURL);
            window.location.href=this.responseURL;
        }
    }    
}

</script>
</body>